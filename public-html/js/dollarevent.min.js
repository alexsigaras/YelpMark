function onLoad(){_isDown=!1,_state=0}function strokenizer(t){$("<div class='strokeResult'></div>").appendTo(t),$('<canvas class="strokeCanvas"></canvas>').appendTo(t),attachEvent(t)}function attachEvent(t){t.onmousedown=mouseDownEvent,t.onmousemove=mouseMoveEvent,t.onmouseup=mouseUpEvent,t.onmouseout=mouseOutEvent}function getCanvasRect(t){for(var e=t.width,n=t.height,o=t.offsetLeft,s=t.offsetTop;null!=t.offsetParent;)t=t.offsetParent,o+=t.offsetLeft,s+=t.offsetTop;return{x:o,y:s,width:e,height:n}}function getScrollY(){return $(window).scrollTop()}function mouseDownEvent(t){var e=t.clientX,n=t.clientY;_startingPoint={x:e,y:n};var o=$("canvas.strokeCanvas",this).css("z-index",10)[0];_g=o.getContext("2d"),_points=new Array,_r=new DollarRecognizer,o.width=$(o).width(),o.height=$(o).height(),_rc=getCanvasRect(o),_g.clearRect(0,0,_rc.width,_rc.height),document.onselectstart=function(){return!1},document.onmousedown=function(){return!1},_isDown=!0,e-=_rc.x,n-=_rc.y-getScrollY(),_g.fillStyle="rgb(0,0,255)",_g.fillRect(e-4,n-4,8,8),_points.length=1,_points[0]=new Point(e,n)}function mouseMoveEvent(t){var e=t.clientX,n=t.clientY;_isDown&&(e-=_rc.x,n-=_rc.y-getScrollY(),_points[_points.length]=new Point(e,n),drawConnectedPoint(_points.length-2,_points.length-1))}function mouseUpEvent(t){t.clientX,t.clientY;if(document.onselectstart=function(){return!0},document.onmousedown=function(){return!0},_isDown){if(_isDown=!1,_points.length>=10){var e=_r.Recognize(_points,!1);setTimeout(stateController,0,this,e.Name)}else drawText(this,"Too few points made. Please try again.");_g.clearRect(0,0,_rc.width,_rc.height),$("canvas.strokeCanvas",this).css("z-index",-1)}}function mouseOutEvent(){}function drawText(t,e){$(".strokeResult",t).text(e),setTimeout(function(){$(".strokeResult",t).text("")},0)}function drawConnectedPoint(t,e){_g.beginPath(),_g.strokeStyle="rgb(0,0,225)",_g.moveTo(_points[t].X,_points[t].Y),_g.lineTo(_points[e].X,_points[e].Y),_g.closePath(),_g.stroke()}function round(t,e){return e=Math.pow(10,e),Math.round(t*e)/e}function onClickAddExisting(){if(_points.length>=10){var t=document.getElementById("unistrokes"),e=t[t.selectedIndex].value,n=_r.AddGesture(e,_points);drawText('"'+e+'" added. Number of "'+e+'"s defined: '+n+".")}}function onClickAddCustom(){var t=document.getElementById("custom").value;if(_points.length>=10&&t.length>0){_r.AddGesture(t,_points)}for(var e=_r.Unistrokes.length-1,n=_r.Unistrokes[e].Points,o="this.Unistrokes["+e+'] = new Unistroke("'+t+'", new Array(',s=0;s<n.length;s++)o+="new Point("+parseInt(n[s].X)+","+parseInt(n[s].Y)+"),";o+="));"}function onClickCustom(){document.getElementById("custom").select()}function onClickDelete(){var t=_r.DeleteUserGestures();alert("All user-defined gestures have been deleted. Only the 1 predefined gesture remains for each of the "+t+" types.")}function stateController(t,e){var n=$("#inputBox").val();console.log(e),chars=["s","u","h","i"],chars.indexOf(e)>-1&&$("#inputBox").val(n+e)}var _isDown,_points,_r,_g,_rc,_state,_startingPoint,_addedNumber=0;